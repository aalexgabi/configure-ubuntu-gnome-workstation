#!/bin/bash

# Stop on error
set -e

# Get project root directory
BASEDIR=$(dirname $(realpath $0))/..

# Check if already installed
command -v code &> /dev/null || INSTALL=1
if [ $INSTALL ]; then
  # Download Code
  wget -O /tmp/code_current_amd64.deb https://go.microsoft.com/fwlink/?LinkID=760868
  # Install package
  sudo gdebi --n /tmp/code_current_amd64.deb
fi

# Ensure configuration directory exists
mkdir -p ~/.config/Code/User
# Copy configuration
cp $BASEDIR/configurations/code/settings.json ~/.config/Code/User/settings.json
